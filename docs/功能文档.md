# Claude FastAPI 管理系统功能文档

## 项目概述

Claude FastAPI 是一个基于 FastAPI + Vue.js 的全栈 Web 开发框架，参考了 gin-vue-admin 项目的功能设计，专为快速开发中小型项目而构建。

## 技术架构

### 后端技术栈
- **FastAPI**: 现代、快速的 Python Web 框架
- **Redis**: 缓存和会话管理
- **Uvicorn**: ASGI 服务器
- **Docker**: 容器化部署

### 前端技术栈
- **Vue.js 3**: 渐进式 JavaScript 框架
- **Element Plus**: Vue 3 UI 组件库
- **Vite**: 现代前端构建工具
- **Pinia**: Vue 状态管理

## 当前实现的功能

### 1. 基础服务
- **健康检查**: `/health` 接口监控系统状态
- **根路由**: `/` 基础信息接口
- **CORS 支持**: 跨域请求处理

### 2. 缓存管理
- **Redis 连接**: 异步 Redis 客户端
- **缓存测试**: `/cache/test` 测试 Redis 连接
- **缓存操作**:
  - GET `/cache/{key}`: 获取缓存值
  - POST `/cache/{key}`: 设置缓存值（支持 TTL）

### 3. 前端界面
- **响应式布局**: 使用 Element Plus 容器组件
- **路由系统**: Vue Router 配置
- **状态管理**: Pinia 状态管理器

## 计划实现的功能（参考 gin-vue-admin）

### 1. 认证授权系统
- [ ] **JWT 认证**: 用户登录/登出
- [ ] **权限管理**: 基于角色的访问控制
- [ ] **动态路由**: 根据权限动态生成菜单
- [ ] **多点登录限制**: 防止重复登录

### 2. 用户管理
- [ ] **用户注册/登录**: 完整的用户认证流程
- [ ] **用户信息管理**: 用户资料的增删改查
- [ ] **角色管理**: 角色创建、权限分配
- [ ] **权限矩阵**: 细粒度权限控制

### 3. 系统管理
- [ ] **API 管理**: 接口文档自动生成
- [ ] **系统配置**: 可配置的系统参数
- [ ] **操作日志**: 用户操作记录
- [ ] **系统监控**: 性能指标监控

### 4. 文件管理
- [ ] **文件上传**: 支持多种文件格式
- [ ] **文件下载**: 文件下载管理
- [ ] **云存储支持**: 集成多个云平台
- [ ] **分片上传**: 大文件分片上传

### 5. 内容管理
- [ ] **动态表单**: 可配置的表单生成器
- [ ] **代码生成**: 自动化代码生成工具
- [ ] **数据字典**: 系统字典管理
- [ ] **分页组件**: 统一的分页处理

### 6. 开发工具
- [ ] **API 文档**: Swagger/OpenAPI 集成
- [ ] **代码生成器**: 根据模型生成 CRUD 代码
- [ ] **表单设计器**: 拖拽式表单设计
- [ ] **工作流**: 简单的审批流程

### 7. 高级功能
- [ ] **国际化**: 多语言支持
- [ ] **主题切换**: 暗黑/明亮主题
- [ ] **数据导入导出**: Excel 等格式支持
- [ ] **实时通知**: WebSocket 消息推送

## 数据库设计（计划）

### 核心表结构
```sql
-- 用户表
users (id, username, password_hash, email, status, created_at, updated_at)

-- 角色表
roles (id, name, description, created_at, updated_at)

-- 权限表
permissions (id, name, resource, action, created_at, updated_at)

-- 用户角色关联表
user_roles (user_id, role_id)

-- 角色权限关联表
role_permissions (role_id, permission_id)

-- API 接口表
apis (id, path, method, group, description, created_at, updated_at)

-- 操作日志表
operation_logs (id, user_id, action, resource, ip, user_agent, created_at)
```

## API 接口设计

### 认证相关
```
POST /auth/login      # 用户登录
POST /auth/logout     # 用户登出
POST /auth/register   # 用户注册
GET  /auth/info       # 获取用户信息
```

### 用户管理
```
GET    /users         # 获取用户列表
POST   /users         # 创建用户
GET    /users/{id}    # 获取用户详情
PUT    /users/{id}    # 更新用户信息
DELETE /users/{id}    # 删除用户
```

### 角色权限
```
GET    /roles         # 获取角色列表
POST   /roles         # 创建角色
PUT    /roles/{id}    # 更新角色
DELETE /roles/{id}    # 删除角色
GET    /permissions   # 获取权限列表
```

### 系统管理
```
GET /system/config    # 获取系统配置
PUT /system/config    # 更新系统配置
GET /system/logs      # 获取操作日志
GET /system/monitor   # 获取系统监控信息
```

## 部署架构

### Docker 容器化
- **Web 服务**: FastAPI 应用容器
- **前端服务**: Nginx + Vue.js 静态文件
- **缓存服务**: Redis 容器
- **数据库**: PostgreSQL/MySQL 容器

### 生产环境建议
- **负载均衡**: Nginx/HAProxy
- **HTTPS**: SSL/TLS 证书配置
- **监控**: Prometheus + Grafana
- **日志**: ELK Stack 或 Loki

## 开发规范

### 代码规范
- **Python**: 遵循 PEP 8 标准
- **JavaScript**: 使用 ESLint + Prettier
- **Git**: 规范的提交信息格式
- **API**: RESTful 设计原则

### 安全最佳实践
- **密码加密**: bcrypt 哈希
- **JWT 安全**: 合理的过期时间
- **输入验证**: Pydantic 数据验证
- **SQL 注入防护**: ORM 查询
- **XSS 防护**: 前端输入过滤

## 项目路线图

### 第一阶段（基础功能）
1. 用户认证系统
2. 基础权限管理
3. 用户管理界面
4. API 文档集成

### 第二阶段（核心功能）
1. 角色权限系统
2. 文件上传管理
3. 系统配置管理
4. 操作日志记录

### 第三阶段（高级功能）
1. 动态表单生成
2. 代码生成工具
3. 工作流系统
4. 数据导入导出

### 第四阶段（优化完善）
1. 性能优化
2. 监控告警
3. 国际化支持
4. 移动端适配

## 贡献指南

### 开发环境搭建
1. 克隆项目代码
2. 安装后端依赖: `pip install -r requirements.txt`
3. 安装前端依赖: `cd frontend && npm install`
4. 启动开发环境: `docker-compose up -d`

### 提交流程
1. Fork 项目到个人仓库
2. 创建功能分支
3. 完成开发并测试
4. 提交 Pull Request

---

*本文档将随着项目进展持续更新*